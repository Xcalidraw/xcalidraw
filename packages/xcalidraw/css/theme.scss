@import "open-color/open-color.scss";
@import "./variables.module.scss";

.xcalidraw {
  --theme-filter: none;

  // --- BUTTONS & BASICS ---
  --button-destructive-bg-color: #{$oc-red-1};
  --button-destructive-color: #{$oc-red-9};
  --button-gray-1: #{$oc-gray-2};
  --button-gray-2: #{$oc-gray-4};
  --button-gray-3: #{$oc-gray-5};

  // Mobile & Dialogs
  --mobile-action-button-bg: rgba(255, 255, 255, 0.85);
  --mobile-color-border: var(--default-border-color);
  --button-special-active-bg-color: #{$oc-teal-0}; /* Updated to Teal tint */
  --dialog-border-color: var(--color-gray-20);
  --dropdown-icon: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="292.4" height="292.4" viewBox="0 0 292 292"><path d="M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z"/></svg>');

  // Highlights & Icons
  --focus-highlight-color: #{$oc-teal-2}; /* Focus ring is now Teal */
  --icon-fill-color: var(--color-on-surface);
  --icon-green-fill-color: #{$oc-green-9};

  // --- BACKGROUNDS (LIGHT MODE) ---
  --default-bg-color: #f8f9fa; /* Your requested Technical Grey */
  --input-bg-color: #ffffff;
  --input-border-color: #{$oc-gray-4};
  --input-hover-bg-color: #{$oc-gray-1};
  --input-label-color: #{$oc-gray-7};
  --island-bg-color: #ffffff; /* Keep toolbars white to pop against the grey BG */

  // UI Elements
  --keybinding-color: var(--color-gray-40);
  --link-color: #087f5b; /* Links are now Teal */
  --overlay-bg-color: #{transparentize($oc-white, 0.12)};
  --popup-bg-color: var(--island-bg-color);
  --popup-secondary-bg-color: #{$oc-gray-1};
  --popup-text-color: #{$oc-black};
  --popup-text-inverted-color: #{$oc-white};
  --select-highlight-color: #{$oc-teal-5};

  // Shadows
  --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),
    0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),
    0px 7px 14px 0px rgba(0, 0, 0, 0.05);

  // --- INTERACTION COLORS ---
  --button-hover-bg: var(--color-surface-high);
  --button-active-bg: var(--color-surface-high);
  --button-active-border: var(--color-brand-active);
  --default-border-color: var(--color-surface-high);

  // Sizes (Unchanged)
  --default-button-size: 2rem;
  --default-icon-size: 1rem;
  --lg-button-size: 2.25rem;
  --lg-icon-size: 1rem;
  --editor-container-padding: 1rem;
  --mobile-action-button-size: 2rem;

  @include isMobile {
    --editor-container-padding: 0.75rem;
  }

  @media screen and (min-device-width: 1921px) {
    --lg-button-size: 2.5rem;
    --lg-icon-size: 1.25rem;
    --default-button-size: 2.25rem;
    --default-icon-size: 1.25rem;
  }

  --scrollbar-thumb: var(--button-gray-2);
  --scrollbar-thumb-hover: var(--button-gray-3);
  --color-slider-track: #c3fae8; /* Teal track */
  --color-slider-thumb: var(--color-gray-80);

  // Sidebar & Modals
  --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),
    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),
    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),
    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),
    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),
    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);
  --avatar-border-color: var(--color-gray-20);
  --sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),
    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),
    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),
    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),
    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),
    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);
  --sidebar-border-color: var(--color-surface-high);
  --sidebar-bg-color: var(--island-bg-color);
  --library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01),
    0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09),
    0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);

  --space-factor: 0.25rem;
  --text-primary-color: var(--color-on-surface);

  // --- SELECTION BOX COLOR ---
  --color-selection: #087f5b; /* Your Primary Teal */

  --color-icon-white: #{$oc-white};

  // --- MAIN BRAND COLORS (TEAL UPDATE) ---
  --color-primary: #087f5b;
  --color-primary-darker: #066045; /* Darker Teal */
  --color-primary-darkest: #044532;
  --color-primary-light: #e6fcf5; /* Light Teal bg */
  --color-primary-light-darker: #c3fae8;
  --color-primary-hover: #099268;

  // Greys
  --color-gray-10: #f5f5f5;
  --color-gray-20: #ebebeb;
  --color-gray-30: #d6d6d6;
  --color-gray-40: #b8b8b8;
  --color-gray-50: #999999;
  --color-gray-60: #7a7a7a;
  --color-gray-70: #5c5c5c;
  --color-gray-80: #3d3d3d;
  --color-gray-85: #242424;
  --color-gray-90: #1e1e1e;
  --color-gray-100: #121212;

  --color-disabled: var(--color-gray-40);

  // Warnings & Errors (Kept Standard)
  --color-warning: #fceeca;
  --color-warning-dark: #f5c354;
  --color-warning-darker: #f3ab2c;
  --color-warning-darkest: #ec8b14;
  --color-text-warning: var(--text-primary-color);

  --color-danger: #db6965;
  --color-danger-dark: #db6965;
  --color-danger-darker: #d65550;
  --color-danger-darkest: #d1413c;
  --color-danger-text: black;

  --color-danger-background: #fff0f0;
  --color-danger-icon-background: #ffdad6;
  --color-danger-color: #700000;
  --color-danger-icon-color: #700000;

  --color-warning-background: var(--color-warning);
  --color-warning-icon-background: var(--color-warning-dark);
  --color-warning-color: var(--text-primary-color);
  --color-warning-icon-color: var(--text-primary-color);

  --color-muted: var(--color-gray-30);
  --color-muted-darker: var(--color-gray-60);
  --color-muted-darkest: var(--color-gray-100);
  --color-muted-background: var(--color-gray-80);
  --color-muted-background-darker: var(--color-gray-100);

  --color-promo: var(--color-primary);

  // Success Colors
  --color-success: #cafccc;
  --color-success-darker: #bafabc;
  --color-success-darkest: #a5eba8;
  --color-success-text: #268029;
  --color-success-contrast: #65bb6a;
  --color-success-contrast-hover: #6bcf70;
  --color-success-contrast-active: #6edf74;

  --color-logo-icon: var(--color-primary);
  --color-logo-text: #190064;

  --border-radius-md: 0.375rem;
  --border-radius-lg: 0.5rem;

  // --- SURFACES (LIGHT MODE) ---
  --color-surface-high: #f1f3f5; /* Slightly grey surface */
  --color-surface-mid: #f8f9fa;
  --color-surface-low: #ececf4;
  --color-surface-lowest: #ffffff;
  --color-on-surface: #1b1b1f;
  --color-brand-hover: #099268;
  --color-on-primary-container: #044532;
  --color-surface-primary-container: #e6fcf5;
  --color-brand-active: #087f5b;
  --color-border-outline: #767680;
  --color-border-outline-variant: #c5c5d0;

  --color-badge: #0b6513;
  --background-color-badge: #d3ffd2;

  &.theme--dark {
    &.theme--dark-background-none {
      background: none;
    }
  }

  // --- DARK MODE OVERRIDES (DEEP SLATE) ---
  &.theme--dark {
    --theme-filter: invert(93%) hue-rotate(180deg);

    // Dark Mode Buttons
    --button-destructive-bg-color: #5a0000;
    --button-destructive-color: #{$oc-red-3};
    --button-gray-1: #334155; /* Slate 700 */
    --button-gray-2: #1e293b; /* Slate 800 */
    --button-gray-3: #0f172a; /* Slate 900 */

    --mobile-action-button-bg: var(--island-bg-color);
    --mobile-color-border: rgba(255, 255, 255, 0.85);
    --button-special-active-bg-color: #113a2f;
    --dialog-border-color: var(--color-gray-80);
    --dropdown-icon: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="292.4" height="292.4" viewBox="0 0 292 292"><path fill="%23ced4da" d="M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z"/></svg>');
    --focus-highlight-color: #{$oc-teal-6};
    --icon-green-fill-color: #{$oc-green-4};

    // --- BACKGROUNDS (DARK MODE) ---
    --default-bg-color: #0f172a; /* Your Deep Slate */
    --input-bg-color: #0f172a;
    --input-border-color: #334155;
    --input-hover-bg-color: #1e293b;
    --input-label-color: #{$oc-gray-2};
    --island-bg-color: #1e293b; /* Slate 800 for contrast against Slate 900 BG */

    --keybinding-color: var(--color-gray-60);
    --link-color: #63e6be; /* Light Teal for dark mode */
    --overlay-bg-color: #{transparentize($oc-gray-8, 0.88)};
    --popup-secondary-bg-color: #222;
    --popup-text-color: #{$oc-gray-4};
    --popup-text-inverted-color: #2c2c2c;
    --select-highlight-color: #{$oc-teal-4};
    --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),
      0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),
      0px 7px 14px 0px rgba(0, 0, 0, 0.05);

    --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),
      0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),
      0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),
      0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),
      0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),
      0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);
    --avatar-border-color: var(--color-gray-85);

    --scrollbar-thumb: #{$oc-gray-8};
    --scrollbar-thumb-hover: #{$oc-gray-7};

    --color-slider-track: #1e293b;

    // will be inverted to a lighter color.
    --color-selection: #20c997; /* Bright Teal for dark mode */

    --color-icon-white: var(--color-gray-90);

    // --- BRAND COLORS (DARK MODE) ---
    // Needs to be brighter to be visible on dark slate
    --color-primary: #38d9a9;
    --color-primary-darker: #63e6be;
    --color-primary-darkest: #96f2d7;
    --color-primary-light: #113a2f;
    --color-primary-light-darker: #0d2f26;
    --color-primary-hover: #63e6be;

    --color-disabled: var(--color-gray-70);

    --color-text-warning: var(--color-gray-80);

    --color-danger: #ffa8a5;
    --color-danger-dark: #672120;
    --color-danger-darker: #8f2625;
    --color-danger-darkest: #ac2b29;
    --color-danger-text: #fbcbcc;

    --color-danger-background: #fbcbcc;
    --color-danger-icon-background: #672120;
    --color-danger-color: #261919;
    --color-danger-icon-color: #fbcbcc;

    --color-warning-background: var(--color-warning);
    --color-warning-icon-background: var(--color-warning-dark);
    --color-warning-color: var(--color-gray-80);
    --color-warning-icon-color: var(--color-gray-80);

    --color-muted: var(--color-gray-80);
    --color-muted-darker: var(--color-gray-60);
    --color-muted-darkest: var(--color-gray-20);
    --color-muted-background: var(--color-gray-40);
    --color-muted-background-darker: var(--color-gray-20);

    --color-logo-text: #e2dfff;

    // --- SURFACES (DARK MODE SLATE) ---
    --color-surface-high: #334155; /* Slate 700 */
    --color-surface-low: #1e293b; /* Slate 800 */
    --color-surface-mid: #0f172a; /* Slate 900 */
    --color-surface-lowest: #020617; /* Slate 950 */
    --color-on-surface: #e3e3e8;
    --color-brand-hover: #63e6be;
    --color-on-primary-container: #e6fcf5;
    --color-surface-primary-container: #113a2f;
    --color-brand-active: #20c997;
    --color-border-outline: #94a3b8;
    --color-border-outline-variant: #475569;
    --color-surface-primary-container: #113a2f;
  }
}
