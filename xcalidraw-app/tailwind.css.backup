@import "tailwindcss";

/*
 * Tailwind CSS v4 + shadcn/ui integration
 * Uses CSS variables from theme.scss for consistency
 */

@theme inline {
  /* Map shadcn color utilities to theme.scss variables */
  --color-background: var(--island-bg-color, #ffffff);
  --color-foreground: var(--color-on-surface, #1b1b1f);
  --color-card: var(--island-bg-color, #ffffff);
  --color-card-foreground: var(--color-on-surface, #1b1b1f);
  --color-popover: var(--popup-bg-color, #ffffff);
  --color-popover-foreground: var(--popup-text-color, #000000);
  
  /* Primary uses the xcalidraw teal */
  --color-primary: var(--color-primary, #087f5b);
  --color-primary-foreground: #ffffff;
  
  /* Secondary uses surface colors */
  --color-secondary: var(--color-surface-high, #f1f3f5);
  --color-secondary-foreground: var(--color-on-surface, #1b1b1f);
  
  /* Muted uses gray scale */
  --color-muted: var(--color-gray-20, #ebebeb);
  --color-muted-foreground: var(--color-gray-60, #7a7a7a);
  
  /* Accent uses primary light */
  --color-accent: var(--color-primary-light, #e6fcf5);
  --color-accent-foreground: var(--color-on-primary-container, #044532);
  
  /* Destructive uses danger colors */
  --color-destructive: var(--color-danger, #db6965);
  --color-destructive-foreground: #ffffff;
  
  /* Border and input */
  --color-border: var(--color-border-outline-variant, #c5c5d0);
  --color-input: var(--color-border-outline-variant, #c5c5d0);
  --color-ring: var(--color-primary, #087f5b);
  
  /* Radius */
  --radius-sm: var(--border-radius-sm, 0.25rem);
  --radius-md: var(--border-radius-md, 0.375rem);
  --radius-lg: var(--border-radius-lg, 0.5rem);
  --radius-xl: calc(var(--border-radius-lg, 0.5rem) + 0.25rem);

  /* Animations for shadcn components */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from { height: 0; }
    to { height: var(--radix-accordion-content-height); }
  }
  @keyframes accordion-up {
    from { height: var(--radix-accordion-content-height); }
    to { height: 0; }
  }
}

/* shadcn enter/exit animations */
@keyframes enter {
  from {
    opacity: var(--tw-enter-opacity, 1);
    transform: translate3d(var(--tw-enter-translate-x, 0), var(--tw-enter-translate-y, 0), 0) scale3d(var(--tw-enter-scale, 1), var(--tw-enter-scale, 1), var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0));
  }
}

@keyframes exit {
  to {
    opacity: var(--tw-exit-opacity, 1);
    transform: translate3d(var(--tw-exit-translate-x, 0), var(--tw-exit-translate-y, 0), 0) scale3d(var(--tw-exit-scale, 1), var(--tw-exit-scale, 1), var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0));
  }
}

/* Animation utilities */
.animate-in,
[data-state="open"].animate-in,
[data-state="open"] .animate-in {
  animation-name: enter;
  animation-duration: 150ms;
  animation-fill-mode: forwards;
  --tw-enter-opacity: initial;
  --tw-enter-scale: initial;
  --tw-enter-rotate: initial;
  --tw-enter-translate-x: initial;
  --tw-enter-translate-y: initial;
}

.animate-out,
[data-state="closed"].animate-out,
[data-state="closed"] .animate-out {
  animation-name: exit;
  animation-duration: 150ms;
  animation-fill-mode: forwards;
  --tw-exit-opacity: initial;
  --tw-exit-scale: initial;
  --tw-exit-rotate: initial;
  --tw-exit-translate-x: initial;
  --tw-exit-translate-y: initial;
}

/* Fade animations */
.fade-in-0 { --tw-enter-opacity: 0; }
.fade-out-0 { --tw-exit-opacity: 0; }

/* Zoom animations */
.zoom-in-95 { --tw-enter-scale: .95; }
.zoom-out-95 { --tw-exit-scale: .95; }

/* Slide in animations */
.slide-in-from-top-2, [data-side="bottom"] { --tw-enter-translate-y: -0.5rem; }
.slide-in-from-bottom-2, [data-side="top"] { --tw-enter-translate-y: 0.5rem; }
.slide-in-from-left-2, [data-side="right"] { --tw-enter-translate-x: -0.5rem; }
.slide-in-from-right-2, [data-side="left"] { --tw-enter-translate-x: 0.5rem; }

/* Apply animations to dropdown content based on Radix state */
[data-slot="dropdown-menu-content"][data-state="open"] {
  animation: enter 150ms ease-out forwards;
  --tw-enter-opacity: 0;
  --tw-enter-scale: 0.95;
}

[data-slot="dropdown-menu-content"][data-state="closed"] {
  animation: exit 150ms ease-in forwards;
  --tw-exit-opacity: 0;
  --tw-exit-scale: 0.95;
}

@layer base {
  * {
    @apply border-border;
  }
}

/* Ensure shadcn button text colors override inherited styles */
[data-slot="button"].text-white,
[data-slot="button"][data-variant="destructive"] {
  color: white !important;
}

[data-slot="button"][data-variant="default"] {
  color: var(--primary-foreground) !important;
}

/* Ensure shadcn dropdown appears above other content */
[data-slot="dropdown-menu-content"] {
  z-index: 9999 !important;
}
